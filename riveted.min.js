/*!
 * @preserve
 * riveted.js | v0.2
 * Copyright (c) 2014 Rob Flaherty (@robflaherty)
 * Licensed under the MIT license
 */
var riveted=function(){function e(e){e=e||{},f=parseInt(e.reportInterval,10)||5,s=parseInt(e.idleTimeout,10)||30,m=e.nonInteraction||!0,t(document,"keydown",l),t(document,"click",l),t(window,"mousemove",n(l,500)),t(window,"scroll",n(l,500)),document.addEventListener("visibilitychange",r,!1),document.addEventListener("webkitvisibilitychange",r,!1)}function n(e,n){var t,i,a,o=null,r=0,u=function(){r=new Date,o=null,a=e.apply(t,i)};return function(){var d=new Date;r||(r=d);var c=n-(d-r);return t=this,i=arguments,0>=c?(clearTimeout(o),o=null,r=d,a=e.apply(t,i)):o||(o=setTimeout(u,c)),a}}function t(e,n,t){e.addEventListener?e.addEventListener(n,t,!1):e.attachEvent?e.attachEvent("on"+n,t):e["on"+n]=t}function i(e){"undefined"!=typeof dataLayer?dataLayer.push({event:"RivetedTiming",eventCategory:"Riveted",timingVar:"First Interaction",timingValue:e}):("undefined"!=typeof ga&&ga("send","timing","Riveted","First Interaction",e),"undefined"!=typeof _gaq&&_gaq.push(["_trackTiming","Riveted","First Interaction",e,null,100]))}function a(e){"undefined"!=typeof dataLayer?dataLayer.push({event:"Riveted",eventCategory:"Riveted",eventAction:"Time Spent",eventLabel:"Seconds",eventValue:e,eventNonInteraction:m}):("undefined"!=typeof ga&&ga("send","event","Riveted","Time Spent",e.toString(),f,{nonInteraction:m}),"undefined"!=typeof _gaq&&_gaq.push(["_trackEvent","Riveted","Time Spent",e.toString(),f,m]))}function o(){clearTimeout(w),d()}function r(){(document.hidden||document.webkitHidden)&&o()}function u(){y+=1,y>0&&y%f===0&&a(y)}function d(){p=!0,clearTimeout(I)}function c(){p=!1,clearTimeout(I),I=setInterval(u,1e3)}function v(){var e=new Date,n=e-T;g=!0,i(n),I=setInterval(u,1e3)}function l(){g||v(),p&&c(),clearTimeout(w),w=setTimeout(o,1e3*s+100)}var f,s,m,g=!1,p=!1,y=0,T=new Date,I=null,w=null;return{init:e,trigger:l,setIdle:o}}();